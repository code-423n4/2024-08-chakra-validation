The addition operation at the line in this link https://github.com/code-423n4/2024-08-chakra/blob/abef77d95866f2fec93270491fc5abc9ab14f86d/solidity/settlement/contracts/BaseSettlement.sol#L89 should be performed after the require method. This causes the transaction to be reverted by the modifier after the user has already consumed gas. The best and correct solution is implemented here: https://github.com/code-423n4/2024-08-chakra/blob/abef77d95866f2fec93270491fc5abc9ab14f86d/solidity/settlement/contracts/SettlementSignatureVerifier.sol#L114. Since the require keyword is at the top, a modifier can be used to increase reusability, in line with the general philosophy of programming languages. The same optimization should also be applied here: https://github.com/code-423n4/2024-08-chakra/blob/abef77d95866f2fec93270491fc5abc9ab14f86d/solidity/settlement/contracts/BaseSettlement.sol#L106.
So, operations should be performed after require method. You are able to use modifier instead requirement in terms of reusability and granularity.